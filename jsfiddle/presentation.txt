var people = [];
people.push({firstName: "Gwenaël", lastName: "HAGENMULLER", oo: false});
people.push({firstName: "Victor", lastName: "CHANAT", oo: false});
people.push({firstName: "Alexis", lastName: "CHARVERIAT", oo: false});
people.push({firstName: "Juri", lastName: "FEDJAEV", oo: false});
people.push({firstName: "Arnaud", lastName: "JEGLOT", oo: false});
people.push({firstName: "Maxence", lastName: "LEDUC", oo: false});
people.push({firstName: "Victor", lastName: "MANENTI", oo: false});
people.push({firstName: "Nicolas", lastName: "MERCIER", oo: false});
people.push({firstName: "Vincent", lastName: "RAES", oo: false});
people.push({firstName: "Ming Ye", lastName: "WANG", oo: false});
people.push({firstName: "Buyun", lastName: "ZHANG", oo: false});

var done = [];

// to debug
window.done = done;

var myButton = document.getElementById("next");
var myTable = document.getElementById("people");

myButton.addEventListener("click", function() {
    var where = pickOne(people);
    var who = people[where];
    
    alert(who.firstName + " " + who.lastName);
    
    addPersonToTable(who.firstName, who.lastName, done.length); 

    people.splice(where, 1);
    done.push(who);
    
    if (people.length == 0) {
        myButton.style.display = "none";
    }
});

function pickOne(anArray) {
    var i = Math.floor(Math.random() * (anArray.length - 1));
    return i;
}

function addPersonToTable(firstName, lastName, i) { 
    var rowCount = myTable.rows.length;
    var row = myTable.insertRow(rowCount);
 
    var cell1 = row.insertCell(0);
    cell1.innerHTML = firstName;
    
    var cell2 = row.insertCell(1);
    cell2.innerHTML = lastName;
    
    var cell3 = row.insertCell(2);
    var element2 = document.createElement("input");
    element2.type = "checkbox";
    element2.name = "chckbox[]";
    cell3.appendChild(element2);
    
    element2.addEventListener("click", function(e,v) {
        var who = done[i];
        who.oo = element2.checked;
    });
}
